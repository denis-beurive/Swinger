<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Swinger: SessionMySql Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Swinger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_session_my_sql-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SessionMySql Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class implements a session manager. It should be used to store session's data into a MySql database.  
 <a href="class_session_my_sql.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7624d1117868e270bb9f06d12db9f85a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#a7624d1117868e270bb9f06d12db9f85a">__construct</a> ($in_mysql_database, $in_mysql_host, $in_mysql_user, $in_mysql_password, $in_opt_table_name='sessions')</td></tr>
<tr class="memdesc:a7624d1117868e270bb9f06d12db9f85a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the session manager.  <a href="#a7624d1117868e270bb9f06d12db9f85a">More...</a><br/></td></tr>
<tr class="separator:a7624d1117868e270bb9f06d12db9f85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5da05664692284b15cdc10ec7b8222"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#aae5da05664692284b15cdc10ec7b8222">open</a> ()</td></tr>
<tr class="memdesc:aae5da05664692284b15cdc10ec7b8222"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a session.  <a href="#aae5da05664692284b15cdc10ec7b8222">More...</a><br/></td></tr>
<tr class="separator:aae5da05664692284b15cdc10ec7b8222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a68ff4730171bde800f0ba7f03ed9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#a31a68ff4730171bde800f0ba7f03ed9b">close</a> ()</td></tr>
<tr class="memdesc:a31a68ff4730171bde800f0ba7f03ed9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a session.  <a href="#a31a68ff4730171bde800f0ba7f03ed9b">More...</a><br/></td></tr>
<tr class="separator:a31a68ff4730171bde800f0ba7f03ed9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a50e8f9a585f8ca5a6c5a4cb8af68cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#a7a50e8f9a585f8ca5a6c5a4cb8af68cd">read</a> ($in_session_id)</td></tr>
<tr class="memdesc:a7a50e8f9a585f8ca5a6c5a4cb8af68cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a session's data.  <a href="#a7a50e8f9a585f8ca5a6c5a4cb8af68cd">More...</a><br/></td></tr>
<tr class="separator:a7a50e8f9a585f8ca5a6c5a4cb8af68cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3a2855f04f18d8cf3523a8fb814461"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#a8e3a2855f04f18d8cf3523a8fb814461">write</a> ($in_session_id, $in_data)</td></tr>
<tr class="memdesc:a8e3a2855f04f18d8cf3523a8fb814461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a session.  <a href="#a8e3a2855f04f18d8cf3523a8fb814461">More...</a><br/></td></tr>
<tr class="separator:a8e3a2855f04f18d8cf3523a8fb814461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a961eb5a3fff654d3ff2540dcc1682316"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#a961eb5a3fff654d3ff2540dcc1682316">destroy</a> ($in_session_id)</td></tr>
<tr class="memdesc:a961eb5a3fff654d3ff2540dcc1682316"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a session.  <a href="#a961eb5a3fff654d3ff2540dcc1682316">More...</a><br/></td></tr>
<tr class="separator:a961eb5a3fff654d3ff2540dcc1682316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3768ad9830847e12b944681b70c20b7e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_session_my_sql.html#a3768ad9830847e12b944681b70c20b7e">gc</a> ($in_max_life_time)</td></tr>
<tr class="memdesc:a3768ad9830847e12b944681b70c20b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Garbage Collector.  <a href="#a3768ad9830847e12b944681b70c20b7e">More...</a><br/></td></tr>
<tr class="separator:a3768ad9830847e12b944681b70c20b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class supposes that you use the following DB schema: </p>
<div class="fragment"><div class="line">CREATE TABLE sessions</div>
<div class="line">(</div>
<div class="line">   `<span class="keywordtype">id</span>` VARCHAR(255) NOT NULL,</div>
<div class="line">   `data` TEXT NOT NULL,</div>
<div class="line">   `timestamp` DATETIME NOT NULL,</div>
<div class="line">   INDEX (`<span class="keywordtype">id</span>`),</div>
<div class="line">   INDEX (`timestamp`),</div>
<div class="line">   UNIQUE (`<span class="keywordtype">id</span>`)</div>
<div class="line">)  ENGINE=MyISAM;</div>
</div><!-- fragment --><p>Example: the following should be inserted in the configuration file "config.php".</p>
<div class="fragment"><div class="line">require_once <span class="stringliteral">&#39;Session.php&#39;</span>;</div>
<div class="line">require_once <span class="stringliteral">&#39;SessionMySql.php&#39;</span>;</div>
<div class="line"><a class="code" href="class_session.html#adf59697a04a4193fcff83af922675d75" title="Initialize the sessions&#39; manager.">Session::init</a>(<span class="keyword">new</span> <a class="code" href="class_session_my_sql.html" title="This class implements a session manager. It should be used to store session&#39;s data into a MySql datab...">SessionMySql</a>(<span class="stringliteral">&#39;test&#39;</span>, <span class="stringliteral">&#39;127.0.0.1:3306&#39;</span>, <span class="stringliteral">&#39;root&#39;</span>, <span class="stringliteral">&#39;toor&#39;</span>));</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Please note that the technique in use is not bullet proof, since sessions' IDs are created independently by all PHP processes. In other words, there is no guarantee that two processes won't generate the same ID. But the probability of such event to happen is pretty low. If you don't build a highly critical service, it's OK. Of course, if you are building a front-end for a bank, then you should adopt another strategy. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7624d1117868e270bb9f06d12db9f85a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_mysql_database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_mysql_host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_mysql_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_mysql_password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_opt_table_name</em> = <code>'sessions'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_mysql_database</td><td>Name of the database that holds the tables "sessions". </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_mysql_host</td><td>Host name of the server that runs the MySql server. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_mysql_user</td><td>MySql user. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_mysql_password</td><td>Password for the MySql user. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_opt_table_name</td><td>Name of the table used to store session's data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a31a68ff4730171bde800f0ba7f03ed9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion, the method returns the value TRUE. Otherwise, the method returns the value FALSE. </dd></dl>

</div>
</div>
<a class="anchor" id="a961eb5a3fff654d3ff2540dcc1682316"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::destroy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_session_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_session_id</td><td>The session ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion, the method returns the value TRUE. Otherwise, the method returns the value FALSE. </dd></dl>

</div>
</div>
<a class="anchor" id="a3768ad9830847e12b944681b70c20b7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::gc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_max_life_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_max_life_time</td><td><a class="el" href="class_session.html" title="This class implements some sessions&#39; utilities.">Session</a> life time (in sec). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion, the method returns the value TRUE. Otherwise, the method returns the value FALSE. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><div class="fragment"><div class="line">session.gc_divisor      100</div>
<div class="line">session.gc_maxlifetime 1440</div>
<div class="line">session.gc_probability    1</div>
<div class="line">execution rate 1/100 (session.gc_probability/session.gc_divisor)</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="aae5da05664692284b15cdc10ec7b8222"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::open </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion, the method returns the value TRUE. Otherwise, the method returns the value FALSE. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td>If the method can not access the sessions' table, then the method throws an exception. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>See PHP documentation: <a href="http://php.net/manual/fr/function.session-set-save-handler.php">http://php.net/manual/fr/function.session-set-save-handler.php</a><br/>
 The documentation says that in case of error, the method should return FALSE. In you do that, if the initialization fails, then no alert is thrown. It fails silently. </dd></dl>

</div>
</div>
<a class="anchor" id="a7a50e8f9a585f8ca5a6c5a4cb8af68cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::read </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_session_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_session_id</td><td>The session ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If data are available for the given session, then the method returns a non empty string. Otherwise, the method returns an empty string. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>See <a href="http://php.net/manual/fr/function.session-set-save-handler.php">http://php.net/manual/fr/function.session-set-save-handler.php</a><br/>
 There is no way to signal an error. </dd></dl>

</div>
</div>
<a class="anchor" id="a8e3a2855f04f18d8cf3523a8fb814461"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SessionMySql::write </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_session_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$in_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_session_id</td><td>The session ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">$in_data</td><td>The data to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful completion, the method returns the value TRUE. Otherwise, the method returns the value FALSE. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>See <a href="http://php.net/manual/fr/function.session-set-save-handler.php">http://php.net/manual/fr/function.session-set-save-handler.php</a><br/>
 There is no way to signal an error. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/<a class="el" href="_session_my_sql_8php.html">SessionMySql.php</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 26 2013 12:27:11 for Swinger by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
